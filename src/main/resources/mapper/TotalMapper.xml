<?xml version="1.0" encoding="UTF-8"?> 
	<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
		"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="cn.tedu.store.mapper.TotalMapper">
	<select id="queryallinstock" resultType="java.util.Map" parameterType="java.lang.String"
	useCache="false" flushCache="true">
		select
		wi.id as id,
		wi.in_name as inName,
		wi.in_type as inType,
		wi.in_specifications as inSpecifications,
		wi.in_cost as inCost,
		wi.in_qty as inQty,
		wi.in_pricing as inPricing,
		wi.in_manufacturers as inManufacturers,
		date_format(wi.in_createtime,'%Y-%c-%d %H:%i:%S') AS inCreatetime
		from
		w_instock wi
		<where> 1=1
			<if test="inName!=null and inName!=''">
				AND wi.in_name like CONCAT('%',#{inName},'%')
			</if>
			<if test="inTime1!=null and inTime1!=''">
				AND DATE_FORMAT(wi.in_createtime , '%Y-%m-%d')&gt;=#{inTime1}
			</if>
			<if test="inTime2!=null and inTime2!=''">
				AND DATE_FORMAT(wi.in_createtime , '%Y-%m-%d')&lt;=#{inTime2}
			</if>
		</where>
		group by id
	</select>
	<select id="queryalloutstock" resultType="java.util.Map" parameterType="java.lang.String"
	useCache="false" flushCache="true">
		select
		wi.id as id,
		wi.out_name as outName,
		wi.out_type as outType,
		wi.out_specifications as outSpecifications,
		wi.out_cost as outCost,
		wi.out_pricing as outPricing,
		wi.out_qty as outQty,
		wi.out_profit as outProfit,
		wi.out_vip as outVip,
		wi.out_manufacturers as outManufacturers,
		date_format(wi.out_createtime,'%Y-%c-%d %H:%i:%S') AS outCreatetime
		from
		w_outstock wi
		<where> 1=1
			<if test="inName!=null and inName!=''">
				AND wi.out_name like CONCAT('%',#{inName},'%')
			</if>
			<if test="inTime1!=null and inTime1!=''">
				AND DATE_FORMAT(wi.out_createtime , '%Y-%m-%d')&gt;=#{inTime1}
			</if>
			<if test="inTime2!=null and inTime2!=''">
				AND DATE_FORMAT(wi.out_createtime , '%Y-%m-%d')&lt;=#{inTime2}
			</if>
		</where>
		group by id
	</select>
	<select id="selectinstockByName1" resultType="java.util.Map" parameterType="java.lang.String"
	useCache="false" flushCache="true">
		select
		wi.id as id,
		wi.in_name as inName,
		wi.in_type as inType,
		wi.in_specifications as inSpecifications,
		wi.in_cost as inCost,
		wi.in_qty as inQty,
		wi.in_pricing as inPricing,
		wi.in_manufacturers as inManufacturers,
		wp.parts_name as inPart,
		date_format(wi.in_updatetime,'%Y-%c-%d %H:%i:%S') AS inUpdatetime,
		date_format(wi.in_createtime,'%Y-%c-%d %H:%i:%S') AS inCreatetime
		from
		w_instock wi
		left join w_parts wp on wp.id=wi.in_part
		<where> 1=1
			<if test="inName!=null and inName!=''">
				AND wi.in_name like CONCAT('%',#{inName},'%')
			</if>
			<if test="inTime1!=null and inTime1!=''">
				AND DATE_FORMAT(wi.in_createtime , '%Y-%m-%d')&gt;=#{inTime1}
			</if>
			<if test="inTime2!=null and inTime2!=''">
				AND DATE_FORMAT(wi.in_createtime , '%Y-%m-%d')&lt;=#{inTime2}
			</if>
				AND wi.in_type='配件'
		</where>
		group by id
	</select>
	<select id="queryinstockById" resultType="java.util.Map" parameterType="java.lang.Integer"
	useCache="false" flushCache="true">
		select
		wi.id as id,
		wi.in_name as inName,
		wi.in_specifications as inSpecifications,
		wi.in_cost as inCost,
		wi.in_qty as inQty,
		wi.in_pricing as inPricing,
		wi.in_manufacturers as inManufacturers,
		wp.parts_name as inPart
		from
		w_instock wi
		left join w_parts wp on wp.id=wi.in_part
		where
		wi.id=#{ids2}
	</select>
</mapper>

		
	
	
	
	
	
	
	
	