<?xml version="1.0" encoding="UTF-8"?> 
	<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
		"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="cn.tedu.store.mapper.InstrumentsMapper">
	<!-- <insert parameterType="cn.tedu.store.bean.Instruments" id="insert">
		insert into
		w_instrument_information
		(u_username,u_password,u_phone,u_updatetime)
		values(#{username},#{password},#{phone},now())
	</insert> -->
	<select id="selinstruByName" resultType="java.util.Map" parameterType="java.lang.String"
	useCache="false" flushCache="true">
		select
		wii.id as id,
		wii.ins_name as insName,
		wii.ins_type as insType,
		wii.ins_specifications as insSpecifications,
		wii.ins_cost as insCost,
		wii.ins_pricing as insPricing,
		wii.ins_manufacturers as insManufacturers,
		wp.parts_name as insParts,
		wii.ins_remake as insRemake,
		date_format(wii.ins_time,'%Y-%c-%d %h:%i:%s') AS insTime
		from
		w_instrument_information wii
		left join w_parts wp on wp.id=wii.ins_parts
		<where> 1=1
			<if test="insName!=null and insName!=''">
				AND wii.ins_name like CONCAT('%',#{insName},'%')
			</if>
			<if test="insTime1!=null and insTime1!=''">
				AND DATE_FORMAT(wii.ins_time , '%Y-%m-%d')&gt;=#{insTime1}
			</if>
			<if test="insTime2!=null and insTime2!=''">
				AND DATE_FORMAT(wii.ins_time , '%Y-%m-%d')&lt;=#{insTime2}
			</if>
		</where>
		group by id
	</select>
	<!-- 删除乐器 -->  
	<delete id="delMainInsById" parameterType="cn.tedu.store.bean.Instruments">  
		delete from w_instrument_information  where id= #{insid2}
	</delete> 
	<!-- 批量删除 -->
	<delete id="deletesById"  parameterType="java.util.List">
         delete from w_instrument_information where id in ( 
         <foreach collection="ids2" item="id" separator=",">
            #{id}
        </foreach>)
	</delete>
	<!-- <select id="selectUserById" resultType="cn.tedu.store.bean.Instruments">
		select
		id as id,
		u_username as username,
		u_password as password,
		u_phone as phone,
		u_updatetime as created_user
		from
		w_instrument_information
		where
		id=#{id}
	</select> -->
<!-- 	<select id="selectByPhone" resultType="java.lang.Integer">
		select count(*)
		from
		w_instrument_information
		where
		u_phone=#{phone}
	</select> -->
	<!-- <update id="updateUser" parameterType="cn.tedu.store.bean.Instruments">
		update
			w_instrument_information
		<set>
			<if test="password!=null">
				u_password=#{password},
			</if>
			<if test="username!=null">
				u_username=#{username},
			</if>			
			<if test="phone!=null">
				u_phone=#{phone},
			</if>
			<if test="modifiedTime!=null">
				u_updatetime=#{modifiedTime}
			</if>
		</set>
		where
			id=#{id}
	</update> -->
</mapper>

		
	
	
	
	
	
	
	
	